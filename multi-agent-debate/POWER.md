---
name: "multi-agent-debate"
displayName: "多代理辯證系統"
description: "透過協調者、三個不同角度的代理和批判者進行多輪辯證，對複雜需求進行深度分析並產出最優實踐方案。整合 sequential-thinking、context7 和 serena MCP 工具。"
keywords: ["多代理", "辯證", "決策分析", "架構設計", "方案評估", "批判思考"]
author: "SCL"
---

# 多代理辯證系統

## 概述

多代理辯證系統是一個創新的決策分析工具，透過模擬多個具有不同思考角度的智能代理進行結構化辯論，幫助您在面對複雜需求時做出更全面、更深思熟慮的決策。

系統包含五個核心角色：
- **Orchestrator（協調者）**：分析需求並決定三個代理的思考角度
- **Perspective A/B/C（觀點代理）**：從不同角度提出解決方案
- **Critic（批判者）**：客觀審查所有方案並提出挑戰

透過多輪辯證過程，系統能夠：
- 從多個角度全面分析問題
- 識別方案中的潛在風險和盲點
- 透過批判性思考不斷改進方案
- 最終產出經過充分驗證的最優解決方案

## 可用的 MCP 伺服器

此 Power 整合了以下 MCP 伺服器：

- **sequential-thinking** - 提供結構化思考和推理能力
- **context7** - 存取最新的程式庫文檔和 API 參考
- **serena** - 程式碼分析、檔案操作和專案管理工具

## 可用的 Steering 檔案

此 Power 包含以下詳細指南：

- **agent-definitions** - 完整的五個代理角色定義和職責說明
- **usage-examples** - 詳細的使用範例和最佳實踐案例
- **implementation-guide** - 使用 Kiro subagent 和 MCP 工具的實作指南
- **complete-workflow** - 完整的多輪辯證流程實作（6 個階段）
- **prompt-interface** - 關鍵字觸發和自動調用機制
- **troubleshooting** - 常見問題解決方案和疑難排解指南

使用 `readSteering` 動作來存取特定的指南內容。

## 完整辯證流程（6 個階段）

### Phase 0：需求分析與角度配置
- Orchestrator 分析需求並配置思考角度
- 識別需求類型和關鍵約束條件

### Phase 1：初始方案生成（⚡ 並行執行）
- 三個 Perspective Agents **並行**提出解決方案
- 每個代理從不同角度深度分析問題
- 關鍵：在同一個 function_calls block 中同時發起多個 invokeSubAgent

### Phase 2：批判審查
- Critic 客觀審查所有方案並提出挑戰
- 根據可行性、效益、風險控制三維度評分

### Phase 3：反駁與修正（⚡ 並行執行）
- 各 Agent **並行**回應 Critic 的挑戰
- 修正方案或堅持立場，表明最終態度

### Phase 4：共識檢查
- 檢查是否有 ≥2 個 Agent 同意某方案
- 評估分數差距是否 ≥8 分
- 決定是否達成共識或繼續辯證

### Phase 5：使用者互動
- 每輪結束後詢問使用者選擇
- 支援繼續、採納、介入、重設角度等選項
- 根據使用者選擇調整辯證方向

### Phase 6：最終輸出
- 生成結構化的辯證報告
- 包含採納方案、評分明細、辯論過程
- 提供實施建議和關鍵洞察

## 自動觸發機制

此 Power 支援關鍵字自動觸發，當您的 prompt 包含以下內容時會自動啟動：

### 觸發關鍵字
- **直接觸發**：辯證、多角度分析、方案比較、決策分析
- **情境觸發**：設計系統 + 考慮因素、選擇技術 + 評估標準
- **參數化**：--max-rounds N, --perspectives "角度1,角度2,角度3"

### 使用範例
```
# 直接觸發
"請對電商推薦系統進行多角度辯證分析"

# 參數化觸發  
"辯證分析快取策略，最多 3 輪，從效能、成本、複雜度角度"

# 情境觸發
"我要設計支付系統，需要考慮安全性、效能和使用者體驗"
```

### 手動觸發
如果自動檢測未觸發，您可以明確要求：
- "啟動多代理辯證"
- "使用 debate 分析"  
- "進行辯證分析"

## 核心角色

### 🎯 Orchestrator（協調者）
- **職責**：分析需求並決定三個代理的思考角度
- **輸出**：需求分析報告和角度配置表

### 🅰️ Perspective Agent A
- **職責**：從指定角度提出解決方案
- **輸出**：結構化方案文件和評估報告

### 🅱️ Perspective Agent B  
- **職責**：從不同角度提出替代方案
- **輸出**：結構化方案文件和評估報告

### 🅲 Perspective Agent C
- **職責**：提供第三種視角的解決方案
- **輸出**：結構化方案文件和評估報告

### 🔍 Critic（批判者）
- **職責**：客觀審查所有方案並提出挑戰
- **輸出**：審查報告和量化評分

## 入門指南

### 基本使用流程

1. **需求描述**：清楚描述您要解決的問題或需求
2. **角度配置**：Orchestrator 根據需求類型自動選擇三個思考角度
3. **方案生成**：三個代理並行提出解決方案
4. **批判審查**：Critic 對每個方案提出挑戰
5. **迭代改進**：代理回應挑戰並修正方案
6. **共識達成**：當≥2個代理同意某方案時達成共識
7. **最終輸出**：產出完整的解決方案和辯論記錄

### 適用場景

| 場景類型 | 典型角度組合 | 適用情況 |
|----------|--------------|----------|
| **架構設計** | 效能優先 vs 可維護性優先 vs 擴展性優先 | 系統架構選型、技術棧決策 |
| **功能開發** | 快速交付 vs 品質優先 vs 使用者體驗優先 | 產品功能規劃、開發策略 |
| **效能優化** | 演算法優化 vs 快取策略 vs 架構重構 | 系統效能瓶頸解決 |
| **問題修復** | 快速修補 vs 根本解決 vs 防禦性重構 | 線上問題處理、技術債務 |
| **技術選型** | 主流穩定 vs 新興技術 vs 自研方案 | 技術框架選擇、工具評估 |

## 評分標準

系統使用三個維度對方案進行量化評估：

### 可行性 (Feasibility) - 10分
- **9-10分**：技術成熟、資源充足、可立即執行
- **7-8分**：技術可行、需少量準備
- **5-6分**：有挑戰但可克服
- **3-4分**：需要顯著額外資源或技術突破
- **1-2分**：可行性存疑

### 效益 (Benefit) - 10分
- **9-10分**：完全解決問題且有額外價值
- **7-8分**：大部分解決問題
- **5-6分**：部分解決問題
- **3-4分**：效益有限
- **1-2分**：幾乎無效益

### 風險控制 (Risk Control) - 10分
- **9-10分**：風險極低或完全可控
- **7-8分**：主要風險已識別且有緩解方案
- **5-6分**：有風險但可接受
- **3-4分**：風險較高，緩解措施不足
- **1-2分**：風險嚴重，可能導致失敗

## 使用範例

### 基本使用
```bash
/debate 我想為電商網站新增商品推薦功能
```

### 指定最大輪數
```bash
/debate 重構使用者認證系統 --max-rounds 5
```

### 自訂思考角度
```bash
/debate 設計新的快取策略 --perspectives "效能優先,成本優先,簡單優先"
```

## 輸出格式

系統會產生結構化的分析報告：

```markdown
# 🎯 最終方案

## 採納方案: [方案名稱]
**來源**: Agent [X]（[共識狀態]）
**總分**: X/30

[完整方案內容]

## 📊 評分明細

| Agent | 可行性 | 效益 | 風險控制 | 總分 |
|-------|--------|------|----------|------|
| A     | X/10   | X/10 | X/10     | X/30 |
| B     | X/10   | X/10 | X/10     | X/30 |
| C     | X/10   | X/10 | X/10     | X/30 |

## 📜 辯論過程
[完整的辯論記錄，包含各輪的方案、挑戰和回應]
```

## 最佳實踐

### 需求描述技巧
1. **具體明確**：避免模糊的描述，提供具體的背景和約束
2. **包含目標**：說明期望達成的目標和成功標準
3. **提及約束**：包括時間、資源、技術等限制條件
4. **背景資訊**：提供相關的業務背景和技術現狀

### 角度選擇策略
- **預設角度**：讓 Orchestrator 根據需求類型自動選擇
- **自訂角度**：當您有特定考量時，可以指定思考角度
- **平衡性**：確保三個角度能夠涵蓋問題的不同面向
- **相關性**：角度應該與實際需求和約束相關

### 互動參與
- **適時介入**：當辯論偏離方向時，可以調整或追加條件
- **保持開放**：相信辯證過程，不要過早下結論
- **提供回饋**：在每輪結束時提供您的觀點和偏好
- **記錄洞察**：注意辯論過程中產生的新想法和洞察

## 進階功能

### 自訂評估標準
您可以在需求描述中指定特殊的評估標準：
```
需求：設計快取策略
特殊要求：特別重視成本控制，效能可以適度犧牲
```

### 混合方案
當各方案都有優點時，可以要求代理提出混合方案：
```
介入指示：請結合 Agent A 的快取策略和 Agent B 的一致性保證
```

### 階段性決策
對於複雜問題，可以分階段進行辯證：
```
第一階段：確定整體架構方向
第二階段：細化具體實施方案
```

## MCP 工具整合

### Sequential Thinking
- **工具名稱**：`sequentialthinking`
- **用途**：提供結構化的思考過程，幫助代理進行深度分析
- **使用場景**：複雜問題分解、多步驟推理、假設驗證

### Context7
- **工具名稱**：`resolve_library_id`、`get_library_docs`
- **用途**：存取最新的程式庫文檔和技術資料
- **使用場景**：技術選型、API 參考、最佳實踐查詢

### Serena
- **工具名稱**：`read_file`、`find_symbol`、`search_for_pattern` 等
- **用途**：程式碼分析、檔案操作、專案結構理解
- **使用場景**：現有程式碼分析、架構評估、重構建議

## 技術實作

### 系統需求
- Kiro IDE 已安裝並設定
- MCP 伺服器：sequential-thinking、context7、serena
- 支援 Kiro subagent 系統
- 檔案讀寫權限

### 執行環境
- 支援並行代理執行
- MCP 工具整合
- 結構化文件輸出
- 使用者互動介面

## 相關資源

- **完整代理定義**：查看 `agent-definitions` steering 檔案
- **使用範例**：查看 `usage-examples` steering 檔案  
- **疑難排解**：查看 `troubleshooting` steering 檔案

---

**系統版本**：1.0.0  
**作者**：SCL  
**授權**：MIT License